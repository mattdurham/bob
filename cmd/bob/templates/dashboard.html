<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bob Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <header>
        <h1>üè¥‚Äç‚ò†Ô∏è Bob - Workflow Dashboard</h1>
        <nav>
            <a href="/">Dashboard</a>
            <a href="/tasks">Tasks</a>
        </nav>
    </header>

    <main>
        {{if .Error}}
        <div class="error">{{.Error}}</div>
        {{end}}

        <section class="stats">
            <div class="stat-card">
                <h3>Active Workflows</h3>
                <div class="stat-value">{{len .Workflows}}</div>
            </div>
            <div class="stat-card">
                <h3>Tasks</h3>
                <div class="stat-value">{{.TaskCount}}</div>
            </div>
        </section>

        <section class="workflows">
            <h2>Workflows</h2>
            {{if .Workflows}}
            <div class="workflow-list">
                {{range .Workflows}}
                <div class="workflow-card">
                    <div class="workflow-header">
                        <h3>
                            <a href="/workflow/{{.WorkflowID}}">{{.Workflow}}</a>
                        </h3>
                        <span class="badge">{{.CurrentStep}}</span>
                    </div>
                    <p class="task-description">{{.TaskDescription}}</p>
                    <div class="workflow-meta">
                        <div class="meta-item">
                            <span class="label">Worktree:</span>
                            <span class="value">{{.WorktreePath}}</span>
                        </div>
                        <div class="meta-item">
                            <span class="label">Loops:</span>
                            <span class="value">{{.LoopCount}}</span>
                        </div>
                        <div class="meta-item">
                            <span class="label">Issues:</span>
                            <span class="value">{{.IssueCount}}</span>
                        </div>
                        <div class="meta-item">
                            <span class="label">Last Update:</span>
                            <span class="value">{{.LastUpdate.Format "2006-01-02 15:04:05"}}</span>
                        </div>
                    </div>
                </div>
                {{end}}
            </div>
            {{else}}
            <p class="empty-state">No active workflows found. Start a workflow using Bob's MCP tools!</p>
            {{end}}
        </section>
    </main>

    <footer>
        <p>Belayin' Pin Bob - Captain of Your Agents</p>
    </footer>
</body>
</html>
